import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
  DialogTrigger,
} from "@/components/ui/dialog";

const sessionId = await ctx.db.insert("sessions", {
  // ...
  code: sessionCode,
  // ...
});

const sessionsWithStats = await Promise.all(
  sessions.map(async (session) => {
    const attendanceCount = await ctx.db
      .query("attendance")
      .withIndex("by_session", (q) => q.eq("sessionId", session._id))
      .collect()
      .then((results) => results.length);
    
    return {
      ...session,
      attendanceCount,
    };
  })
);

{recentSessions.map((session) => (
  <div key={session._id} ...>
    ...
    <div className="text-sm font-bold">{session.attendanceCount}</div>
  </div>
))}